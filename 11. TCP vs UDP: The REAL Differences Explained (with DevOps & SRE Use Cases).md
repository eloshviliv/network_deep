# рЃЊрЃдрЃћ 11 Рђћ TCP vs UDP: рЃарЃћрЃљрЃџрЃБрЃарЃў рЃњрЃљрЃюрЃАрЃ«рЃЋрЃљрЃЋрЃћрЃЉрЃћрЃЉрЃў рЃљрЃ«рЃАрЃюрЃўрЃџрЃў (DevOps & SRE рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃћрЃЉрЃћрЃЉрЃўрЃЌ)

рЃњрЃарЃФрЃћрЃџрЃў, рЃЏрЃЎрЃЋрЃћрЃЌрЃарЃў, рЃдрЃарЃЏрЃљрЃЊ рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџрЃў рЃАрЃљрЃ«рЃћрЃџрЃЏрЃФрЃдрЃЋрЃљрЃюрЃћрЃџрЃЮ рЃЏрЃАрЃЮрЃцрЃџрЃўрЃЮрЃерЃў рЃЮрЃарЃў рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃБрЃџрЃў рЃърЃарЃЮрЃбрЃЮрЃЎрЃЮрЃџрЃўрЃА рЃњрЃљрЃАрЃљрЃњрЃћрЃЉрЃљрЃЊ.

![alt text](photo2/image-22.png)

## рЃарЃљрЃбрЃЮрЃЏ рЃљрЃарЃўрЃА рЃћрЃА рЃЌрЃћрЃЏрЃљ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў

TCP рЃЊрЃљ UDP рЃљрЃарЃўрЃА рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃБрЃџрЃў рЃерЃарЃўрЃА (Layer 4) рЃЮрЃарЃў рЃАрЃЋрЃћрЃбрЃў.
рЃДрЃЋрЃћрЃџрЃљ рЃърЃљрЃЎрЃћрЃбрЃў, рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф рЃўрЃюрЃбрЃћрЃарЃюрЃћрЃбрЃўрЃЌ рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃЌ, рЃўрЃДрЃћрЃюрЃћрЃЉрЃА рЃћрЃарЃЌ-рЃћрЃарЃЌ рЃЏрЃљрЃЌрЃњрЃљрЃюрЃА.

рЃЏрЃљрЃњрЃарЃљрЃЏ рЃБрЃЏрЃћрЃбрЃћрЃАрЃЮрЃЉрЃљ рЃцрЃўрЃЦрЃарЃЮрЃЉрЃА:
- TCP = рЃАрЃљрЃюрЃЊрЃЮ
- UDP = рЃАрЃгрЃарЃљрЃцрЃў
- TCP = рЃЎрЃљрЃЋрЃерЃўрЃарЃў
- UDP = рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ

рЃЏрЃљрЃњрЃарЃљрЃЏ рЃћрЃА рЃФрЃљрЃџрЃўрЃљрЃю рЃњрЃљрЃЏрЃљрЃарЃбрЃўрЃЋрЃћрЃЉрЃБрЃџрЃўрЃљ.

рЃЊрЃдрЃћрЃА рЃАрЃљрЃЉрЃЮрЃџрЃЮрЃЮрЃЊ рЃњрЃљрЃўрЃњрЃћрЃЉрЃЌ:
- рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃћрЃю рЃўрЃАрЃўрЃюрЃў рЃарЃћрЃљрЃџрЃБрЃарЃљрЃЊ
- рЃарЃљрЃбрЃЮрЃЏ рЃљрЃарЃўрЃА рЃћрЃарЃЌрЃў рЃБрЃцрЃарЃЮ рЃюрЃћрЃџрЃў
- рЃарЃљрЃбрЃЮрЃЏ рЃљрЃарЃўрЃА рЃћрЃарЃЌрЃў рЃБрЃцрЃарЃЮ рЃАрЃгрЃарЃљрЃцрЃў
- рЃарЃЮрЃњрЃЮрЃа рЃўрЃДрЃћрЃюрЃћрЃЉрЃА Kubernetes рЃЏрЃљрЃЌ
- рЃарЃЮрЃњрЃЮрЃа рЃљрЃарЃўрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃў DNS UDP-рЃќрЃћ
- рЃарЃљрЃбрЃЮрЃЏ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА QUIC UDP-рЃА
- рЃърЃљрЃЎрЃћрЃбрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃА рЃњрЃљрЃюрЃАрЃ«рЃЋрЃљрЃЋрЃћрЃЉрЃћрЃЉрЃў
- рЃарЃћрЃљрЃџрЃБрЃарЃў SRE рЃЊрЃћрЃЉрЃљрЃњрЃўрЃА рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃў
- рЃгрЃљрЃарЃЏрЃљрЃЊрЃЮрЃЉрЃўрЃА рЃЎрЃЮрЃЏрЃърЃарЃЮрЃЏрЃўрЃАрЃћрЃЉрЃў

рЃћрЃА рЃљрЃарЃўрЃА рЃћрЃарЃЌ-рЃћрЃарЃЌрЃў рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃЌрЃљрЃЋрЃў DevOps-рЃўрЃАрЃЌрЃЋрЃўрЃА, SRE-рЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА, cloud рЃўрЃюрЃЪрЃўрЃюрЃћрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃўрЃюрЃЪрЃўрЃюрЃћрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА рЃЊрЃљ backend рЃЊрЃћрЃЋрЃћрЃџрЃЮрЃърЃћрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА.

## рЃюрЃљрЃгрЃўрЃџрЃў 1 Рђћ TCP vs UDP рЃћрЃарЃЌ рЃгрЃўрЃюрЃљрЃЊрЃљрЃЊрЃћрЃЉрЃљрЃерЃў

**TCP** = рЃАрЃљрЃюрЃЊрЃЮ рЃЏрЃўрЃгрЃЮрЃЊрЃћрЃЉрЃљ рЃЉрЃћрЃЋрЃарЃў рЃгрЃћрЃАрЃўрЃЌ.
**UDP** = рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ рЃЏрЃфрЃЊрЃћрЃџрЃЮрЃЉрЃўрЃА рЃЏрЃўрЃгрЃЮрЃЊрЃћрЃЉрЃљ рЃЌрЃўрЃЌрЃЦрЃЏрЃўрЃА рЃгрЃћрЃАрЃћрЃЉрЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ.

рЃЏрЃЮрЃЊрЃўрЃЌ рЃАрЃгрЃЮрЃарЃљрЃЊ рЃљрЃЋрЃ«рЃАрЃюрЃљрЃЌ рЃћрЃА.

### рЃљрЃюрЃљрЃџрЃЮрЃњрЃўрЃљ: TCP рЃљрЃарЃўрЃА рЃбрЃћрЃџрЃћрЃцрЃЮрЃюрЃўрЃА рЃќрЃљрЃарЃў, UDP рЃљрЃарЃўрЃА рЃдрЃўрЃљ рЃЉрЃљрЃарЃљрЃЌрЃў

#### TCP (рЃбрЃћрЃџрЃћрЃцрЃЮрЃюрЃўрЃА рЃќрЃљрЃарЃў)

- рЃЌрЃЦрЃЋрЃћрЃю рЃарЃћрЃЎрЃљрЃЋрЃЌ
- рЃљрЃЊрЃљрЃЏрЃўрЃљрЃюрЃў рЃўрЃдрЃћрЃЉрЃА
- рЃЌрЃЦрЃЋрЃћрЃю рЃАрЃљрЃБрЃЉрЃарЃЮрЃЉрЃЌ
- рЃЌрЃЦрЃЋрЃћрЃю рЃљрЃЏрЃЉрЃЮрЃЉрЃЌ "рЃюрЃљрЃ«рЃЋрЃљрЃЏрЃЊрЃўрЃА"
- рЃўрЃАрЃўрЃюрЃў рЃљрЃЊрЃљрЃАрЃбрЃБрЃарЃћрЃЉрЃћрЃю
- рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљрЃерЃўрЃљ
- рЃЮрЃарЃўрЃЋрЃћ рЃЏрЃ«рЃљрЃарЃћ рЃЏрЃБрЃЊрЃЏрЃўрЃЋрЃљрЃЊ рЃћрЃЌрЃљрЃюрЃ«рЃЏрЃћрЃЉрЃљ

#### UDP (рЃдрЃўрЃљ рЃЉрЃљрЃарЃљрЃЌрЃў)

- рЃЌрЃЦрЃЋрЃћрЃю рЃЕрЃљрЃљрЃњрЃЊрЃћрЃЉрЃЌ рЃАрЃљрЃцрЃЮрЃАрЃбрЃЮ рЃДрЃБрЃЌрЃерЃў
- рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃЏрЃўрЃЋрЃўрЃЊрЃћрЃА
- рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃљрЃа рЃЏрЃўрЃЋрЃўрЃЊрЃћрЃА
- рЃЊрЃљрЃЊрЃљрЃАрЃбрЃБрЃарЃћрЃЉрЃљ рЃљрЃа рЃљрЃарЃўрЃА
- рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ рЃљрЃа рЃљрЃарЃўрЃА
- рЃњрЃљрЃарЃљрЃюрЃбрЃўрЃљ рЃљрЃа рЃљрЃарЃўрЃА

## рЃюрЃљрЃгрЃўрЃџрЃў 2 Рђћ рЃАрЃљрЃюрЃЊрЃЮрЃЮрЃЉрЃљ

### TCP рЃњрЃљрЃарЃљрЃюрЃбрЃўрЃљрЃА рЃўрЃФрЃџрЃћрЃЋрЃљ рЃЏрЃўрЃгрЃЮрЃЊрЃћрЃЉрЃљрЃќрЃћ

TCP рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА:
- рЃДрЃЋрЃћрЃџрЃљ рЃърЃљрЃЎрЃћрЃбрЃў рЃЏрЃўрЃдрЃћрЃЉрЃБрЃџрЃў
- рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃњрЃљрЃўрЃњрЃќрЃљрЃЋрЃюрЃћрЃЉрЃљ рЃЌрЃБ рЃЊрЃљрЃЎрЃљрЃарЃњрЃБрЃџрЃў
- рЃЏрЃўрЃгрЃЮрЃЊрЃћрЃЉрЃБрЃџрЃў рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљрЃерЃў
- рЃЊрЃљрЃќрЃўрЃљрЃюрЃћрЃЉрЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ
- рЃюрЃљрЃЎрЃљрЃЊрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў
- рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў

рЃЌрЃБ рЃарЃљрЃдрЃљрЃф рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃўрЃљ Рєњ TCP рЃљрЃАрЃгрЃЮрЃарЃћрЃЉрЃА рЃЏрЃљрЃА.

### UDP рЃљрЃа рЃўрЃФрЃџрЃћрЃЋрЃљ рЃњрЃљрЃарЃљрЃюрЃбрЃўрЃљрЃА рЃЏрЃўрЃгрЃЮрЃЊрЃћрЃЉрЃљрЃќрЃћ

UDP рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃА рЃърЃљрЃЎрЃћрЃбрЃћрЃЉрЃА рЃЊрЃљ рЃљрЃарЃљрЃАрЃЮрЃЊрЃћрЃА рЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА рЃЏрЃЮрЃЋрЃўрЃЊрЃљ рЃЌрЃБ рЃљрЃарЃљ.

**рЃарЃљрЃбрЃЮрЃЏ?**
рЃарЃљрЃЊрЃњрЃљрЃю рЃќрЃЮрЃњрЃ»рЃћрЃа рЃАрЃљрЃюрЃЊрЃЮрЃЮрЃЉрЃљ рЃљрЃа рЃљрЃарЃўрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў.

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**
рЃЋрЃўрЃЊрЃћрЃЮ рЃќрЃљрЃарЃћрЃЉрЃерЃў:
- рЃћрЃарЃЌрЃў рЃЎрЃљрЃЊрЃарЃўрЃА рЃЊрЃљрЃЎрЃљрЃарЃњрЃЋрЃљ рЃљрЃа рЃљрЃЦрЃЋрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ
- рЃЏрЃљрЃњрЃарЃљрЃЏ retransmission-рЃўрЃА рЃЊрЃљрЃџрЃЮрЃЊрЃћрЃЉрЃљ рЃерЃћрЃЦрЃЏрЃюрЃўрЃА lag-рЃА

## рЃюрЃљрЃгрЃўрЃџрЃў 3 Рђћ рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ

### TCP

рЃърЃљрЃЎрЃћрЃбрЃћрЃЉрЃў рЃБрЃюрЃЊрЃљ рЃЏрЃЮрЃЋрЃўрЃЊрЃћрЃА рЃќрЃБрЃАрЃбрЃљрЃЊ рЃўрЃЏ рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃўрЃЌ, рЃарЃЮрЃњрЃЮрЃарЃф рЃњрЃљрЃўрЃњрЃќрЃљрЃЋрЃюрЃљ.
рЃЌрЃБ рЃърЃљрЃЎрЃћрЃбрЃў 5 рЃЏрЃЮрЃЋрЃљ рЃърЃљрЃЎрЃћрЃб 4-рЃЏрЃЊрЃћ Рєњ TCP рЃЉрЃБрЃцрЃћрЃарЃА рЃљрЃЎрЃћрЃЌрЃћрЃЉрЃА рЃърЃљрЃЎрЃћрЃб 5-рЃА Рєњ рЃћрЃџрЃЮрЃЊрЃћрЃЉрЃљ 4-рЃА Рєњ рЃерЃћрЃЏрЃЊрЃћрЃњ рЃЏрЃўрЃљрЃгрЃЮрЃЊрЃћрЃЉрЃА.

рЃћрЃА рЃќрЃарЃЊрЃўрЃА:
- рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃљрЃА
- рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљрЃА

рЃЏрЃљрЃњрЃарЃљрЃЏ рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃАрЃўрЃАрЃгрЃЮрЃарЃћрЃА.

### UDP

рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ рЃАрЃљрЃћрЃарЃЌрЃЮрЃЊ рЃљрЃа рЃљрЃарЃўрЃА. рЃърЃљрЃЎрЃћрЃбрЃў 5 рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃЏрЃЮрЃЋрЃўрЃЊрЃћрЃА рЃърЃљрЃЎрЃћрЃб 1-рЃЏрЃЊрЃћ Рєњ рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃљрЃЏ рЃБрЃюрЃЊрЃљ рЃњрЃљрЃБрЃЏрЃЎрЃџрЃљрЃЋрЃЊрЃћрЃА рЃЏрЃљрЃА.

## рЃюрЃљрЃгрЃўрЃџрЃў 4 Рђћ рЃАрЃўрЃЕрЃЦрЃљрЃарЃћ

### TCP рЃБрЃцрЃарЃЮ рЃюрЃћрЃџрЃўрЃљ рЃарЃљрЃЊрЃњрЃљрЃю:

- 3-рЃњрЃќрЃўрЃљрЃюрЃў handshake
- Retransmissions
- ACKs
- рЃюрЃљрЃЎрЃљрЃЊрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў
- рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў
- рЃЊрЃљрЃџрЃљрЃњрЃћрЃЉрЃБрЃџрЃў рЃЏрЃўрЃгрЃЮрЃЊрЃћрЃЉрЃљ
- TIME_WAIT рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃљ
- рЃБрЃцрЃарЃЮ рЃЊрЃўрЃЊрЃў header (20 рЃЉрЃљрЃўрЃбрЃў)

### UDP рЃБрЃцрЃарЃЮ рЃАрЃгрЃарЃљрЃцрЃўрЃљ рЃарЃљрЃЊрЃњрЃљрЃю:

- Handshake рЃљрЃа рЃљрЃарЃўрЃА
- рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃњрЃљрЃњрЃќрЃљрЃЋрЃюрЃљ рЃљрЃа рЃљрЃарЃўрЃА
- ACKs рЃљрЃа рЃљрЃарЃўрЃА
- рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ рЃљрЃа рЃљрЃарЃўрЃА
- Header рЃърЃљрЃбрЃљрЃарЃљрЃљ (8 рЃЉрЃљрЃўрЃбрЃў)
- рЃюрЃљрЃЎрЃџрЃћрЃЉрЃў overhead
- рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃљ рЃљрЃа рЃљрЃарЃўрЃА

## рЃюрЃљрЃгрЃўрЃџрЃў 5 Рђћ Overhead

### TCP Header (20РђЊ60 рЃЉрЃљрЃўрЃбрЃў)

рЃерЃћрЃўрЃфрЃљрЃЋрЃА:
- Sequence number
- Acknowledgment
- Flags (SYN, ACK, FINРђд)
- Window size
- Options

### UDP Header (8 рЃЉрЃљрЃўрЃбрЃў)

рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ:
- рЃгрЃДрЃљрЃарЃЮрЃА рЃърЃЮрЃарЃбрЃў
- рЃЊрЃљрЃюрЃўрЃерЃюрЃБрЃџрЃћрЃЉрЃўрЃА рЃърЃЮрЃарЃбрЃў
- рЃАрЃўрЃњрЃарЃФрЃћ
- Checksum

**UDP рЃљрЃарЃўрЃА рЃЏрЃўрЃюрЃўрЃЏрЃљрЃџрЃўрЃАрЃбрЃБрЃарЃў.**

## рЃюрЃљрЃгрЃўрЃџрЃў 6 Рђћ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃћрЃЉрЃў (рЃФрЃљрЃџрЃўрЃљрЃю рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџрЃў)

### рЃАрЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ TCP?

- HTTP / HTTPS
- REST APIs
- SSH
- MySQL / Postgres
- Kafka
- рЃцрЃљрЃўрЃџрЃўрЃА рЃњрЃљрЃЊрЃљрЃфрЃћрЃЏрЃљ
- рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЏрЃЮрЃўрЃЌрЃ«рЃЮрЃЋрЃА рЃАрЃўрЃАрЃгрЃЮрЃарЃћрЃА

### рЃАрЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ UDP?

- DNS
- DHCP
- VoIP
- рЃЋрЃўрЃЊрЃћрЃЮ рЃАрЃбрЃарЃўрЃЏрЃўрЃюрЃњрЃў
- Zoom/Meet
- рЃЮрЃюрЃџрЃљрЃўрЃю рЃЌрЃљрЃЏрЃљрЃерЃћрЃЉрЃў
- QUIC (HTTP/3)
- рЃфрЃЮрЃфрЃ«рЃљрЃџрЃў рЃАрЃбрЃарЃўрЃЏрЃўрЃюрЃњрЃў
- Syslog UDP-рЃќрЃћ
- рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃАрЃћрЃюрЃАрЃЮрЃарЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў

**UDP рЃўрЃарЃЕрЃћрЃЋрЃљ рЃарЃЮрЃфрЃљ:**
- рЃАрЃўрЃЕрЃЦрЃљрЃарЃћ > рЃАрЃљрЃюрЃЊрЃЮрЃЮрЃЉрЃљ
- рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃљ > рЃАрЃўрЃАрЃгрЃЮрЃарЃћ
- рЃЊрЃљрЃЎрЃљрЃарЃњрЃЋрЃўрЃА рЃбрЃЮрЃџрЃћрЃарЃљрЃюрЃбрЃЮрЃЉрЃљ рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА

## рЃюрЃљрЃгрЃўрЃџрЃў 7 Рђћ рЃарЃљрЃбрЃЮрЃЏ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА Kubernetes UDP-рЃА DNS-рЃўрЃАрЃЌрЃЋрЃўрЃА

Kubernetes DNS (CoreDNS) рЃўрЃДрЃћрЃюрЃћрЃЉрЃА:
```
UDP рЃърЃЮрЃарЃбрЃў 53
```

**рЃарЃљрЃбрЃЮрЃЏ?**

рЃарЃљрЃЊрЃњрЃљрЃю:
- DNS рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃћрЃЉрЃў рЃърЃљрЃбрЃљрЃарЃљрЃљ
- DNS рЃћрЃџрЃЮрЃЊрЃћрЃЉрЃљ рЃњрЃљрЃарЃЎрЃЋрЃћрЃБрЃџ рЃЊрЃљрЃЎрЃљрЃарЃњрЃЋрЃљрЃА
- Retries рЃЕрЃљрЃерЃћрЃюрЃћрЃЉрЃБрЃџрЃўрЃљ
- UDP рЃБрЃцрЃарЃЮ рЃАрЃгрЃарЃљрЃцрЃўрЃљ
- рЃюрЃљрЃЎрЃџрЃћрЃЉрЃў рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃљ рЃЎрЃџрЃљрЃАрЃбрЃћрЃарЃерЃў
- рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА overhead рЃљрЃа рЃљрЃарЃўрЃА
- рЃЉрЃћрЃЋрЃарЃў DNS рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃљ pod-рЃќрЃћ Рєњ рЃБрЃцрЃарЃЮ рЃАрЃгрЃарЃљрЃцрЃў

**рЃЌрЃБ DNS TCP-рЃќрЃћ рЃўрЃДрЃЮ Рєњ Kubernetes рЃюрЃћрЃџрЃў рЃўрЃЦрЃюрЃћрЃЉрЃЮрЃЊрЃљ.**

## рЃюрЃљрЃгрЃўрЃџрЃў 8 Рђћ QUIC (рЃЌрЃљрЃюрЃљрЃЏрЃћрЃЊрЃарЃЮрЃЋрЃћ HTTP/3) рЃњрЃљрЃЊрЃўрЃА UDP-рЃќрЃћ (рЃарЃљрЃбрЃЮрЃЏ?)

QUIC (рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ HTTP/3-рЃерЃў) рЃўрЃДрЃћрЃюрЃћрЃЉрЃА UDP-рЃА TCP-рЃА рЃюрЃљрЃфрЃЋрЃџрЃљрЃЊ.

**рЃЏрЃўрЃќрЃћрЃќрЃћрЃЉрЃў:**

- UDP рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃўрЃФрЃџрЃћрЃЋрЃљ user-space рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃЏрЃћрЃюрЃћрЃ»рЃЏрЃћрЃюрЃбрЃў
- рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃфрЃўрЃџрЃћрЃЉрЃА TCP handshake рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃљрЃА
- рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃўрЃФрЃџрЃћрЃЋрЃљ multiplexing head-of-line blocking-рЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ
- рЃБрЃцрЃарЃЮ рЃАрЃгрЃарЃљрЃцрЃў рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃљрЃдрЃЊрЃњрЃћрЃюрЃљ
- рЃЏрЃЮрЃЉрЃўрЃџрЃБрЃарЃў рЃЦрЃАрЃћрЃџрЃўрЃА рЃЏрЃћрЃњрЃЮрЃЉрЃарЃБрЃџрЃў

**Google рЃљрЃдрЃЏрЃЮрЃљрЃЕрЃўрЃюрЃљ:**

QUIC UDP-рЃќрЃћ рЃБрЃцрЃарЃЮ рЃАрЃгрЃарЃљрЃцрЃўрЃљ рЃЋрЃўрЃЊрЃарЃћ TCP + TLS рЃћрЃарЃЌрЃљрЃЊ.

## рЃюрЃљрЃгрЃўрЃџрЃў 9 Рђћ UDP рЃбрЃЋрЃўрЃарЃЌрЃўрЃА рЃњрЃљрЃЏрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃџрЃћрЃЉрЃерЃў (Multiplexing)

UDP рЃљрЃарЃўрЃА stateless.

рЃбрЃЋрЃўрЃарЃЌрЃўрЃА рЃњрЃљрЃЏрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃџрЃћрЃЉрЃА рЃћрЃА рЃБрЃДрЃЋрЃљрЃарЃЌ рЃарЃљрЃЊрЃњрЃљрЃю:
- рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃфрЃ«рЃарЃўрЃџрЃў рЃљрЃа рЃљрЃарЃўрЃА
- TIME_WAIT рЃљрЃа рЃљрЃарЃўрЃА
- CLOSE_WAIT рЃљрЃа рЃљрЃарЃўрЃА
- рЃАрЃгрЃарЃљрЃцрЃў рЃАрЃћрЃАрЃўрЃўрЃА рЃњрЃљрЃЊрЃљрЃарЃЌрЃЋрЃљ
- рЃЏрЃљрЃдрЃљрЃџрЃў throughput

**ELB, NLB, Envoy рЃЊрЃљ Istio рЃДрЃЋрЃћрЃџрЃљ рЃерЃћрЃБрЃФрЃџрЃўрЃљ UDP-рЃА рЃЏрЃљрЃарЃерЃарЃБрЃбрЃўрЃќрЃљрЃфрЃўрЃљ.**

**рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃћрЃЉрЃў:**
- DNS
- syslog
- рЃЏрЃћрЃбрЃарЃўрЃЎрЃћрЃЉрЃў
- service discovery
- рЃЌрЃљрЃЏрЃљрЃерЃўрЃА рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃў
- рЃЏрЃћрЃЊрЃўрЃљ рЃАрЃбрЃарЃўрЃЏрЃўрЃюрЃњрЃў

## рЃюрЃљрЃгрЃўрЃџрЃў 10 Рђћ рЃгрЃљрЃарЃЏрЃљрЃЊрЃЮрЃЉрЃўрЃА рЃњрЃљрЃюрЃАрЃ«рЃЋрЃљрЃЋрЃћрЃЉрЃћрЃЉрЃў (рЃФрЃљрЃџрЃўрЃљрЃю рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃБрЃџрЃў)

![alt text](photo2/image-23.png)

рЃЌрЃБ рЃЌрЃЦрЃЋрЃћрЃюрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃА рЃАрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ:
- РџА рЃБрЃџрЃбрЃарЃљ-рЃЊрЃљрЃЉрЃљрЃџрЃў рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃљ
- ­ЪјЦ рЃфрЃЮрЃфрЃ«рЃљрЃџрЃў рЃАрЃбрЃарЃўрЃЏрЃўрЃюрЃњрЃў
- ­ЪЊА рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃЕрЃљрЃбрЃў
- ­Ъј« рЃЌрЃљрЃЏрЃљрЃерЃћрЃЉрЃў
- ­ЪЈј№ИЈ рЃЏрЃљрЃдрЃљрЃџрЃў throughput

Рєњ **UDP рЃўрЃњрЃћрЃЉрЃА.**

рЃЌрЃБ рЃЌрЃЦрЃЋрЃћрЃюрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃА рЃАрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ:
- ­Ъћљ рЃАрЃўрЃАрЃгрЃЮрЃарЃћ
- ­ЪЊё рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ
- РџЎ№ИЈ рЃАрЃљрЃюрЃЊрЃЮрЃЮрЃЉрЃљ
- ­ЪЊд рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃБрЃџрЃЮрЃЉрЃљ

Рєњ **TCP рЃўрЃњрЃћрЃЉрЃА.**

## рЃюрЃљрЃгрЃўрЃџрЃў 11 Рђћ рЃърЃљрЃЎрЃћрЃбрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ

### TCP рЃърЃљрЃЎрЃћрЃбрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ:

```
+------------------+
| IP Header        |
+------------------+
| TCP Header (20B) |
+------------------+
| рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў       |
+------------------+
```
![alt text](photo2/image-24.png)
### UDP рЃърЃљрЃЎрЃћрЃбрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ:

```
+------------------+
| IP Header        |
+------------------+
| UDP Header (8B)  |
+------------------+
| рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў       |
+------------------+
```

![alt text](photo2/image-25.png)

**TCP header рЃЉрЃћрЃЋрЃарЃљрЃЊ рЃБрЃцрЃарЃЮ рЃЊрЃўрЃЊрЃўрЃљ Рєњ рЃЏрЃћрЃбрЃў overhead.**

## рЃюрЃљрЃгрЃўрЃџрЃў 12 Рђћ UDP рЃбрЃарЃљрЃцрЃўрЃЎрЃўрЃА рЃЊрЃћрЃЉрЃљрЃњрЃў (SRE рЃБрЃюрЃљрЃарЃћрЃЉрЃў)

### рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ tcpdump:

```bash
tcpdump -i eth0 udp
```
![alt text](photo/image-26.png)

### рЃЊрЃћрЃЉрЃљрЃњрЃў DNS:

```bash
tcpdump -i eth0 port 53
```

### рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃЏрЃЮрЃЋрЃўрЃЊрЃљ рЃЌрЃБ рЃљрЃарЃљ рЃърЃљрЃЎрЃћрЃбрЃћрЃЉрЃў:

```bash
tcpdump -i eth0 udp and src host <ip>
```

### рЃњрЃљрЃЊрЃљрЃўрЃдрЃћрЃЌ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ headers:

```bash
tcpdump -vv udp
```

### рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃдрЃўрЃљ UDP рЃАрЃЮрЃЎрЃћрЃбрЃћрЃЉрЃў:

```bash
ss -lun
```
![alt text](photo/image-27.png)

### рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ listening рЃърЃЮрЃарЃбрЃћрЃЉрЃў:

```bash
ss -tuln
```
![alt text](photo/image-28.png)

### рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃърЃарЃЮрЃфрЃћрЃАрЃћрЃЉрЃў:

```bash
sudo lsof -i udp
```
![alt text](photo/image-29.png)

## рЃюрЃљрЃгрЃўрЃџрЃў 13 Рђћ рЃарЃЮрЃЊрЃўрЃА рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃЮрЃЌ TCP vs UDP (рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃўрЃџрЃћрЃЉрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃЏрЃФрЃдрЃЋрЃљрЃюрЃћрЃџрЃЮ)

### рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ TCP рЃарЃЮрЃфрЃљ рЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљрЃЌ:

Рюћ рЃАрЃўрЃАрЃгрЃЮрЃарЃћ
Рюћ рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ
Рюћ рЃАрЃљрЃюрЃЊрЃЮрЃЮрЃЉрЃљ
Рюћ рЃАрЃбрЃљрЃЉрЃўрЃџрЃБрЃарЃў throughput
Рюћ idempotent рЃЦрЃфрЃћрЃЋрЃљ

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў:**
- DB рЃЎрЃЮрЃЏрЃБрЃюрЃўрЃЎрЃљрЃфрЃўрЃљ
- APIs
- Message queues
- SSH
- рЃцрЃљрЃўрЃџрЃўрЃА рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃћрЃЉрЃў
- рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃћрЃЉрЃў

### рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ UDP рЃарЃЮрЃфрЃљ рЃњрЃГрЃўрЃарЃЊрЃћрЃЉрЃљрЃЌ:

Рюћ рЃЊрЃљрЃЉрЃљрЃџрЃў рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃљ
Рюћ рЃЏрЃљрЃдрЃљрЃџрЃў throughput
Рюћ рЃљрЃа рЃњрЃљрЃўрЃюрЃбрЃћрЃарЃћрЃАрЃћрЃЉрЃЌ рЃърЃљрЃЎрЃћрЃбрЃўрЃА рЃЊрЃљрЃЎрЃљрЃарЃњрЃЋрЃљ
Рюћ рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃЦрЃфрЃћрЃЋрЃљ
Рюћ stateless рЃЎрЃЮрЃЏрЃБрЃюрЃўрЃЎрЃљрЃфрЃўрЃљ

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў:**
- DNS
- рЃфрЃЮрЃфрЃ«рЃљрЃџрЃў рЃЋрЃўрЃЊрЃћрЃЮ
- рЃЌрЃљрЃЏрЃљрЃерЃћрЃЉрЃў
- QUIC
- рЃбрЃћрЃџрЃћрЃЏрЃћрЃбрЃарЃўрЃљ
- Heartbeats
- IoT

## рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ (рЃЊрЃдрЃћ 11)

рЃЊрЃдрЃћрЃА рЃўрЃАрЃгрЃљрЃЋрЃџрЃћрЃЌ:
- РюЁ TCP = рЃАрЃљрЃюрЃЊрЃЮ, рЃфрЃЮрЃбрЃљ рЃюрЃћрЃџрЃў, рЃЊрЃљрЃџрЃљрЃњрЃћрЃЉрЃБрЃџрЃў
- РюЁ UDP = рЃАрЃгрЃарЃљрЃцрЃў, рЃЏрЃљрЃарЃбрЃўрЃЋрЃў, рЃљрЃарЃљрЃАрЃљрЃюрЃЊрЃЮ
- РюЁ TCP handshake Рєњ overhead
- РюЁ UDP Рєњ рЃЏрЃўрЃюрЃўрЃЏрЃљрЃџрЃБрЃарЃў 8-рЃЉрЃљрЃўрЃбрЃўрЃљрЃюрЃў header
- РюЁ UDP рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ DNS, VoIP, streaming, QUIC-рЃАрЃЌрЃЋрЃўрЃА
- РюЁ TCP рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ APIs, databases, SSH-рЃАрЃЌрЃЋрЃўрЃА
- РюЁ Kubernetes рЃўрЃДрЃћрЃюрЃћрЃЉрЃА UDP-рЃА рЃЎрЃџрЃљрЃАрЃбрЃћрЃарЃўрЃА DNS-рЃўрЃАрЃЌрЃЋрЃўрЃА
- РюЁ QUIC рЃБрЃАрЃгрЃарЃћрЃЉрЃА TCP-рЃА рЃЌрЃљрЃюрЃљрЃЏрЃћрЃЊрЃарЃЮрЃЋрЃћ рЃЋрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
- РюЁ рЃгрЃљрЃарЃЏрЃљрЃЊрЃЮрЃЉрЃўрЃА рЃњрЃљрЃюрЃАрЃ«рЃЋрЃљрЃЋрЃћрЃЉрЃћрЃЉрЃў
- РюЁ рЃарЃЮрЃњрЃЮрЃа рЃЊрЃћрЃЉрЃљрЃњрЃЊрЃћрЃЉрЃљ UDP рЃбрЃарЃљрЃцрЃўрЃЎрЃў
- РюЁ рЃарЃћрЃљрЃџрЃБрЃарЃў DevOps/SRE рЃњрЃљрЃЋрЃџрЃћрЃюрЃљ

**рЃљрЃЏрЃўрЃА рЃњрЃљрЃњрЃћрЃЉрЃљ рЃњрЃћрЃ«рЃЏрЃљрЃарЃћрЃЉрЃљрЃЌ рЃерЃћрЃЦрЃЏрЃюрЃљрЃЌ:**
- рЃБрЃЎрЃћрЃЌрЃћрЃАрЃў рЃЏрЃўрЃЎрЃарЃЮрЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў
- рЃБрЃЎрЃћрЃЌрЃћрЃАрЃў Kubernetes рЃЎрЃџрЃљрЃАрЃбрЃћрЃарЃћрЃЉрЃў
- рЃБрЃЎрЃћрЃЌрЃћрЃАрЃў load balancing
- рЃБрЃЎрЃћрЃЌрЃћрЃАрЃў рЃЊрЃћрЃЉрЃљрЃњрЃўрЃА workflow-рЃћрЃЉрЃў
- рЃБрЃЎрЃћрЃЌрЃћрЃАрЃў рЃгрЃљрЃарЃЏрЃљрЃЊрЃЮрЃЉрЃўрЃА рЃЮрЃърЃбрЃўрЃЏрЃўрЃќрЃљрЃфрЃўрЃљ

## рЃЏрЃЮрЃЏрЃЊрЃћрЃЋрЃюрЃЮ (рЃЊрЃдрЃћ 12)

**Netfilter, iptables & nftables Рђћ Linux-рЃўрЃА Firewall рЃбрЃЋрЃўрЃюрЃў**

рЃўрЃАрЃгрЃљрЃЋрЃџрЃўрЃЌ:
- рЃарЃЮрЃњрЃЮрЃа рЃцрЃўрЃџрЃбрЃарЃљрЃЋрЃА Linux-рЃў рЃърЃљрЃЎрЃћрЃбрЃћрЃЉрЃА
- Connection tracking
- NAT (SNAT, DNAT, MASQUERADE)
- iptables рЃфрЃ«рЃарЃўрЃџрЃћрЃЉрЃў & рЃ»рЃљрЃГрЃЋрЃћрЃЉрЃў
- nftables (рЃЌрЃљрЃюрЃљрЃЏрЃћрЃЊрЃарЃЮрЃЋрЃћ рЃЕрЃљрЃюрЃљрЃфрЃЋрЃџрЃћрЃЉрЃљ)
- рЃарЃЮрЃњрЃЮрЃа рЃўрЃДрЃћрЃюрЃћрЃЉрЃћрЃю CNI рЃърЃџрЃљрЃњрЃўрЃюрЃћрЃЉрЃў iptables-рЃА
- рЃЊрЃћрЃЉрЃљрЃњрЃў рЃЏрЃЮрЃњрЃЊрЃћрЃЉрЃБрЃџрЃў рЃърЃљрЃЎрЃћрЃбрЃћрЃЉрЃўрЃАрЃљ
- NAT рЃгрЃћрЃАрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
- рЃарЃћрЃљрЃџрЃБрЃарЃў SRE рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃћрЃЉрЃў: "рЃарЃљрЃбрЃЮрЃЏ рЃЋрЃћрЃа рЃљрЃдрЃгрЃћрЃЋрЃА рЃЕрЃћрЃЏрЃў pod-рЃў рЃўрЃюрЃбрЃћрЃарЃюрЃћрЃбрЃА?"

**рЃћрЃА рЃўрЃЦрЃюрЃћрЃЉрЃљ р▓Џр▓љр▓Ар▓ўр▓Бр▓ар▓ў рЃЌрЃљрЃЋрЃў.**