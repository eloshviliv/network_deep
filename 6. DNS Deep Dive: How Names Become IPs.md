# рЃЊрЃдрЃћ 6 Рђћ DNS рЃдрЃарЃЏрЃљ рЃЕрЃљрЃФрЃўрЃарЃЋрЃљ: рЃарЃЮрЃњрЃЮрЃа рЃ«рЃЊрЃћрЃЉрЃўрЃљрЃю рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃў IP-рЃћрЃЉрЃљрЃЊ (рЃўрЃюрЃбрЃћрЃарЃюрЃћрЃбрЃўрЃА рЃбрЃћрЃџрЃћрЃцрЃЮрЃюрЃўрЃА рЃгрЃўрЃњрЃюрЃў, рЃЏрЃљрЃарЃбрЃўрЃЋрЃљрЃЊ рЃљрЃ«рЃАрЃюрЃўрЃџрЃў)

рЃњрЃарЃФрЃћрЃџрЃў, рЃБрЃљрЃдрЃарЃћрЃАрЃљрЃЊ рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў, рЃЊрЃљрЃЏрЃгрЃДрЃћрЃЉрЃЌрЃљрЃЌрЃЋрЃўрЃА рЃЏрЃћрЃњрЃЮрЃЉрЃарЃБрЃџрЃў + SRE рЃЊрЃЮрЃюрЃўрЃА рЃљрЃ«рЃАрЃюрЃљ DNS-рЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ.

## рЃарЃљрЃбрЃЮрЃЏ рЃљрЃарЃўрЃА DNS рЃћрЃарЃЌ-рЃћрЃарЃЌрЃў рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃЌрЃћрЃЏрЃљ рЃЦрЃАрЃћрЃџрЃерЃў

рЃгрЃљрЃарЃЏрЃЮрЃўрЃЊрЃњрЃўрЃюрЃћрЃЌ рЃАрЃљрЃЏрЃДрЃљрЃарЃЮ, рЃАрЃљрЃЊрЃљрЃф рЃБрЃюрЃЊрЃљ рЃљрЃЎрЃарЃўрЃцрЃЮрЃЌ `172.217.167.238` Google-рЃќрЃћ рЃгрЃЋрЃЊрЃЮрЃЏрЃўрЃАрЃЌрЃЋрЃўрЃА. рЃљрЃю рЃЊрЃљрЃўрЃЏрЃљрЃ«рЃАрЃЮрЃЋрЃарЃЮрЃЌ `142.250.183.14` YouTube-рЃўрЃАрЃЌрЃЋрЃўрЃА.

рЃћрЃА рЃАрЃљрЃЏрЃДрЃљрЃарЃЮ рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃЊрЃљ 1980 рЃгрЃћрЃџрЃА.

**DNS (Domain Name System)** рЃерЃћрЃфрЃЋрЃљрЃџрЃљ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў, рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃњрЃљрЃ«рЃЊрЃљ рЃўрЃюрЃбрЃћрЃарЃюрЃћрЃбрЃўрЃА рЃбрЃћрЃџрЃћрЃцрЃЮрЃюрЃўрЃА рЃгрЃўрЃњрЃюрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃА рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃА Рєњ IP рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃћрЃЉрЃА.

### рЃДрЃЮрЃЋрЃћрЃџ рЃ»рЃћрЃарЃќрЃћ рЃарЃЮрЃфрЃљ рЃЌрЃЦрЃЋрЃћрЃю:

* рЃћрЃгрЃЋрЃўрЃћрЃЌ рЃЋрЃћрЃЉрЃАрЃљрЃўрЃбрЃА
* curl-рЃўрЃЌ API-рЃА
* рЃњрЃљрЃБрЃерЃЋрЃўрЃЌ рЃЌрЃЦрЃЋрЃћрЃюрЃў Kubernetes service
* рЃБрЃЎрЃљрЃЋрЃерЃўрЃарЃЊрЃћрЃЉрЃўрЃЌ рЃЏрЃўрЃЎрЃарЃЮрЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃА
* ssh-рЃўрЃЌ рЃерЃћрЃЊрЃўрЃ«рЃљрЃарЃЌ рЃАрЃћрЃарЃЋрЃћрЃарЃќрЃћ

Рђд DNS рЃЕрЃБрЃЏрЃљрЃЊ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃцрЃЮрЃюрЃќрЃћ.

### рЃарЃЮрЃфрЃљ DNS рЃўрЃерЃџрЃћрЃЉрЃљ Рєњ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃўрЃерЃџрЃћрЃЉрЃљ.

* Google outage-рЃћрЃЉрЃў
* Cloudflare outage-рЃћрЃЉрЃў
* GitHub outage-рЃћрЃЉрЃў

**рЃЌрЃўрЃЌрЃЦрЃЏрЃўрЃА рЃДрЃЮрЃЋрЃћрЃџрЃЌрЃЋрЃўрЃА DNS.**

рЃЊрЃдрЃћрЃА рЃдрЃарЃЏрЃљрЃЊ рЃерЃћрЃЋрЃљрЃџрЃЌ рЃўрЃЏрЃљрЃерЃў, рЃЌрЃБ рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА DNS рЃарЃћрЃљрЃџрЃБрЃарЃљрЃЊ, рЃЋрЃўрЃќрЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ, рЃљрЃюрЃљрЃџрЃЮрЃњрЃўрЃћрЃЉрЃўрЃЌ, рЃарЃћрЃљрЃџрЃБрЃарЃў lookup рЃюрЃљрЃЎрЃљрЃЊрЃћрЃЉрЃўрЃЌ, recursive vs authoritative рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃўрЃЌ, TTL, caching, Linux рЃ«рЃћрЃџрЃАрЃљрЃгрЃДрЃЮрЃћрЃЉрЃўрЃЌ рЃЊрЃљ debugging-рЃўрЃЌ.

рЃЊрЃљрЃЋрЃўрЃгрЃДрЃЮрЃЌ.

![alt text](photo/image-47.png)

## рЃюрЃљрЃгрЃўрЃџрЃў 1 Рђћ рЃарЃљ рЃљрЃарЃўрЃА DNS (рЃљрЃ«рЃАрЃюрЃўрЃџрЃў рЃарЃЮрЃњрЃЮрЃарЃф рЃљрЃЊрЃљрЃЏрЃўрЃљрЃюрЃўрЃАрЃЌрЃЋрЃўрЃА)

DNS рЃљрЃарЃўрЃА рЃБрЃЉрЃарЃљрЃџрЃЮрЃЊ:

**рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў, рЃњрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃЉрЃљрЃќрЃљ, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃА рЃљрЃЊрЃљрЃЏрЃўрЃљрЃюрЃўрЃАрЃЌрЃЋрЃўрЃА рЃњрЃљрЃАрЃљрЃњрЃћрЃЉ рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃА (google.com) Рєњ IP рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃћрЃЉрЃА (142.250.183.14)**

### рЃўрЃцрЃўрЃЦрЃарЃћрЃЌ DNS-рЃќрЃћ рЃарЃЮрЃњрЃЮрЃарЃф:

* рЃўрЃюрЃбрЃћрЃарЃюрЃћрЃбрЃўрЃА рЃбрЃћрЃџрЃћрЃцрЃЮрЃюрЃўрЃА рЃгрЃўрЃњрЃюрЃќрЃћ
* рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃа рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃћрЃЉрЃўрЃА рЃЊрЃўрЃарЃћрЃЦрЃбрЃЮрЃарЃўрЃљрЃќрЃћ
* Google Maps рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА

рЃюрЃЮрЃЏрЃарЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃљрЃ«рЃАрЃЮрЃЋрЃарЃћрЃЉрЃўрЃА рЃюрЃљрЃфрЃЋрЃџрЃљрЃЊ, DNS рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃЏрЃљрЃЌ рЃЕрЃЋрЃћрЃюрЃЌрЃЋрЃўрЃА.

## рЃюрЃљрЃгрЃўрЃџрЃў 2 Рђћ DNS рЃўрЃћрЃарЃљрЃарЃЦрЃўрЃљ (рЃФрЃљрЃџрЃўрЃљрЃю рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў)

DNS рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃўрЃљ рЃарЃЮрЃњрЃЮрЃарЃф рЃ«рЃћ:

```
          Root (.)
               |
          TLD (.com .net .org .in)
               |
         Authoritative Servers
               |
            Domain Records
```

рЃЏрЃЮрЃЊрЃўрЃЌ рЃЊрЃљрЃЋрЃерЃљрЃџрЃЮрЃЌ.

### 1. Root DNS рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃў (.)

рЃћрЃА рЃљрЃарЃўрЃА DNS рЃ«рЃўрЃА рЃќрЃћрЃЊрЃљ рЃюрЃљрЃгрЃўрЃџрЃў. рЃљрЃарЃўрЃА 13 рЃџрЃЮрЃњрЃўрЃЎрЃБрЃарЃў root рЃАрЃћрЃарЃЋрЃћрЃарЃў, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃАрЃљрЃф рЃЏрЃљрЃарЃЌрЃљрЃЋрЃћрЃю рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў рЃЮрЃарЃњрЃљрЃюрЃўрЃќрЃљрЃфрЃўрЃћрЃЉрЃў.

**рЃўрЃАрЃўрЃюрЃў рЃўрЃфрЃўрЃљрЃю:**

* рЃарЃЮрЃЏрЃћрЃџрЃў DNS рЃАрЃћрЃарЃЋрЃћрЃарЃў рЃърЃљрЃАрЃБрЃ«рЃўрЃАрЃЏрЃњрЃћрЃЉрЃћрЃџрЃўрЃљ .com, .net, .org рЃЊрЃљ рЃљ.рЃе.-рЃќрЃћ
* Рюќ№ИЈ рЃўрЃАрЃўрЃюрЃў рЃљрЃа рЃўрЃфрЃўрЃљрЃю google.com-рЃўрЃА IP

### 2. TLD рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃў (.com, .net, .org)

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**

* `.com` рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃў рЃўрЃфрЃўрЃљрЃю рЃарЃЮрЃЏрЃћрЃџрЃў рЃАрЃћрЃарЃЋрЃћрЃарЃў рЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃА google.com-рЃА
* `.in` рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃў рЃўрЃфрЃўрЃљрЃю amazon.in-рЃА

рЃўрЃАрЃўрЃюрЃў рЃљрЃа рЃўрЃюрЃљрЃ«рЃљрЃЋрЃћрЃю A рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃА. рЃўрЃАрЃўрЃюрЃў рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЏрЃўрЃБрЃЌрЃўрЃЌрЃћрЃЉрЃћрЃю authoritative рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃќрЃћ.

### 3. Authoritative Name Servers

рЃћрЃАрЃћрЃюрЃў рЃљрЃарЃўрЃљрЃю рЃЊрЃЮрЃЏрЃћрЃюрЃўрЃА рЃГрЃћрЃерЃЏрЃљрЃарЃўрЃбрЃћрЃЉрЃўрЃА рЃАрЃљрЃЉрЃЮрЃџрЃЮрЃЮ рЃгрЃДрЃљрЃарЃЮ.

**google.com-рЃўрЃАрЃЌрЃЋрЃўрЃА:**
```
ns1.google.com
ns2.google.com
ns3.google.com
```

**рЃўрЃАрЃўрЃюрЃў рЃўрЃюрЃљрЃ«рЃљрЃЋрЃћрЃю:**
* A record
* AAAA record
* CNAME
* MX
* TXT
* SOA
* NS

## рЃюрЃљрЃгрЃўрЃџрЃў 3 Рђћ рЃЏрЃЌрЃћрЃџрЃў DNS Lookup рЃърЃарЃЮрЃфрЃћрЃАрЃў (рЃюрЃљрЃЉрЃўрЃ»-рЃюрЃљрЃЉрЃўрЃ»)

рЃЊрЃљрЃЋрЃБрЃерЃЋрЃљрЃЌ рЃњрЃљрЃБрЃерЃЋрЃўрЃЌ:
```bash
curl google.com
```

рЃЌрЃЦрЃЋрЃћрЃюрЃў рЃЏрЃљрЃюрЃЦрЃљрЃюрЃљ рЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃА рЃљрЃЏ рЃюрЃљрЃЉрЃўрЃ»рЃћрЃЉрЃА:

### 1. рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃџрЃЮрЃЎрЃљрЃџрЃБрЃарЃў DNS cache

Linux cache-рЃљрЃЋрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃЌ:
* systemd-resolved
* nscd (рЃЮрЃцрЃфрЃўрЃЮрЃюрЃљрЃџрЃБрЃарЃў)
* рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃћрЃЉрЃў (Chrome, Firefox cache DNS-рЃА рЃфрЃљрЃџрЃЎрЃћ)

рЃЌрЃБ рЃЏрЃЮрЃўрЃФрЃћрЃЉрЃюрЃљ Рєњ РџА рЃЊрЃљрЃБрЃДрЃЮрЃЋрЃюрЃћрЃЉрЃћрЃџрЃў рЃърЃљрЃАрЃБрЃ«рЃў (рЃљрЃЏрЃўрЃбрЃЮрЃЏ рЃњрЃљрЃюрЃЏрЃћрЃЮрЃарЃћрЃЉрЃўрЃЌрЃў ping-рЃћрЃЉрЃў рЃБрЃцрЃарЃЮ рЃАрЃгрЃарЃљрЃцрЃўрЃљ)

### 2. рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ /etc/hosts рЃцрЃљрЃўрЃџрЃў

```bash
cat /etc/hosts
```

рЃЌрЃБ google.com рЃљрЃЦ рЃљрЃарЃўрЃА Рєњ рЃБрЃЉрЃарЃљрЃџрЃЮрЃЊ рЃЊрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃљ.

рЃЊрЃћрЃЋрЃћрЃџрЃЮрЃърЃћрЃарЃћрЃЉрЃў рЃ«рЃерЃўрЃарЃљрЃЊ рЃљрЃЏрЃљрЃбрЃћрЃЉрЃћрЃю рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃА рЃљрЃЦ рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃА рЃЊрЃарЃЮрЃА.

### 3. рЃ░рЃЎрЃўрЃЌрЃ«рЃћрЃЌ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџ DNS resolver-рЃА

рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃўрЃљ:
```
/etc/resolv.conf
```

рЃбрЃўрЃърЃБрЃарЃў:
```
nameserver 8.8.8.8
nameserver 1.1.1.1
```

рЃЌрЃБ рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА systemd-resolved-рЃА:
```
nameserver 127.0.0.53
```
(рЃЊрЃљ systemd рЃљрЃЎрЃћрЃЌрЃћрЃЉрЃА рЃарЃћрЃљрЃџрЃБрЃа resolving-рЃА)

### 4. Recursive Resolver рЃўрЃгрЃДрЃћрЃЉрЃА (рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў)

рЃЌрЃЦрЃЋрЃћрЃюрЃў resolver (рЃарЃЮрЃњрЃЮрЃарЃўрЃфрЃљрЃљ 8.8.8.8) рЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃА рЃЏрЃФрЃўрЃЏрЃћ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃљрЃА:

**рЃюрЃљрЃЉрЃўрЃ»рЃў A: рЃ░рЃЎрЃўрЃЌрЃ«рЃћрЃЌ Root рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃА**
```
"рЃАрЃљрЃЊ рЃљрЃарЃўрЃА .com?"
```

Root рЃърЃљрЃАрЃБрЃ«рЃЮрЃЉрЃА:
```
рЃ░рЃЎрЃўрЃЌрЃ«рЃћрЃЌ рЃљрЃЏ TLD рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃА .com-рЃўрЃАрЃЌрЃЋрЃўрЃА
```

**рЃюрЃљрЃЉрЃўрЃ»рЃў B: рЃ░рЃЎрЃўрЃЌрЃ«рЃћрЃЌ .com TLD рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃА**
```
"рЃАрЃљрЃЊ рЃљрЃарЃўрЃА google.com?"
```

TLD рЃърЃљрЃАрЃБрЃ«рЃЮрЃЉрЃА:
```
google.com-рЃўрЃА authoritative рЃАрЃћрЃарЃЋрЃћрЃарЃў рЃљрЃарЃўрЃА ns1.google.com
```

**рЃюрЃљрЃЉрЃўрЃ»рЃў C: рЃ░рЃЎрЃўрЃЌрЃ«рЃћрЃЌ Authoritative рЃАрЃћрЃарЃЋрЃћрЃарЃА**
```
"рЃарЃљ рЃљрЃарЃўрЃА A record google.com-рЃўрЃАрЃЌрЃЋрЃўрЃА?"
```

NS рЃърЃљрЃАрЃБрЃ«рЃЮрЃЉрЃА:
```
142.250.183.14
```

**рЃюрЃљрЃЉрЃўрЃ»рЃў D: Resolver рЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА IP-рЃА рЃЌрЃЦрЃЋрЃћрЃю**

рЃЊрЃљ рЃЌрЃЦрЃЋрЃћрЃюрЃў curl рЃўрЃгрЃДрЃћрЃЉрЃА.

## рЃЋрЃўрЃќрЃБрЃљрЃџрЃБрЃарЃў Рђћ рЃАрЃарЃБрЃџрЃў DNS Lookup рЃюрЃљрЃЎрЃљрЃЊрЃў

```
рЃЌрЃЦрЃЋрЃћрЃюрЃў рЃЏрЃљрЃюрЃЦрЃљрЃюрЃљ
   |
   |---> рЃџрЃЮрЃЎрЃљрЃџрЃБрЃарЃў Cache?
   |
   |---> /etc/hosts?
   |
   |---> DNS Resolver (рЃЏрЃљрЃњ., 8.8.8.8)
              |
              |---> Root Server (.)
              |         "рЃАрЃљрЃЊ рЃљрЃарЃўрЃА .com?"
              |
              |---> TLD (.com)
              |         "рЃАрЃљрЃЊ рЃљрЃарЃўрЃА google.com?"
              |
              |---> Authoritative NS
                        "рЃарЃљ рЃљрЃарЃўрЃА google.com-рЃўрЃА IP?"
              |
            Resolver рЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА IP-рЃА рЃЌрЃЦрЃЋрЃћрЃю
```

## рЃюрЃљрЃгрЃўрЃџрЃў 4 Рђћ DNS Record рЃбрЃўрЃърЃћрЃЉрЃў (рЃЏрЃљрЃарЃбрЃўрЃЋрЃљрЃЊ рЃљрЃ«рЃАрЃюрЃўрЃџрЃў)

### 1. A Record

рЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃА domain Рєњ IPv4

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**
```
google.com Рєњ 142.250.183.14
```

### 2. AAAA Record

рЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃА domain Рєњ IPv6
(4 A = IPv6)

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**
```
google.com Рєњ 2404:6800:4009:80e::200e
```

### 3. CNAME Record

Alias. рЃЏрЃўрЃБрЃЌрЃўрЃЌрЃћрЃЉрЃА рЃћрЃарЃЌ рЃЊрЃЮрЃЏрЃћрЃюрЃА рЃЏрЃћрЃЮрЃарЃћрЃќрЃћ.

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**
```
www.example.com Рєњ example.com
```

www рЃљрЃа рЃљрЃарЃўрЃА рЃфрЃљрЃџрЃЎрЃћ рЃАрЃљрЃўрЃбрЃў Рђћ рЃБрЃЉрЃарЃљрЃџрЃЮрЃЊ alias.

### 4. MX Record (Mail Exchange)

рЃћрЃџ.рЃцрЃЮрЃАрЃбрЃўрЃА рЃАрЃћрЃарЃЋрЃћрЃарЃў рЃЊрЃЮрЃЏрЃћрЃюрЃўрЃАрЃЌрЃЋрЃўрЃА.

### 5. NS Record

рЃљрЃЕрЃЋрЃћрЃюрЃћрЃЉрЃА authoritative рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃА рЃЊрЃЮрЃЏрЃћрЃюрЃўрЃАрЃЌрЃЋрЃўрЃА.

### 6. SOA Record (Start of Authority)

**рЃерЃћрЃўрЃфрЃљрЃЋрЃА:**
* admin email
* serial number
* zone рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў
* refresh рЃЊрЃарЃЮ
* retry рЃЊрЃарЃЮ
* TTL рЃюрЃљрЃњрЃБрЃџрЃўрЃАрЃ«рЃЏрЃћрЃЋрЃў

рЃћрЃА рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃў рЃњрЃЋрЃўрЃЕрЃЋрЃћрЃюрЃћрЃЉрЃА рЃЌрЃБ рЃарЃЮрЃњрЃЮрЃа рЃљрЃарЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЊрЃЮрЃЏрЃћрЃюрЃўрЃА рЃЏрЃцрЃџрЃЮрЃЉрЃћрЃџрЃЮрЃЉрЃљ.

## рЃюрЃљрЃгрЃўрЃџрЃў 5 Рђћ TTL рЃЊрЃљ DNS Caching

**TTL = Time To Live**

рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃљрЃЋрЃА рЃарЃљрЃЏрЃЊрЃћрЃю рЃ«рЃљрЃюрЃА рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ DNS рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃўрЃА cache-рЃўрЃарЃћрЃЉрЃљ.

### рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:

```
google.com TTL = 300
```

рЃюрЃўрЃерЃюрЃљрЃЋрЃА:

рЃЌрЃЦрЃЋрЃћрЃюрЃЏрЃљ рЃЏрЃљрЃюрЃЦрЃљрЃюрЃљрЃЏ рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃЮрЃА рЃ«рЃћрЃџрЃљрЃ«рЃџрЃљ рЃћрЃА рЃърЃљрЃАрЃБрЃ«рЃў 300 рЃгрЃљрЃЏрЃўрЃА рЃњрЃљрЃюрЃЏрЃљрЃЋрЃџрЃЮрЃЉрЃљрЃерЃў.

## рЃарЃљрЃбрЃЮрЃЏ рЃљрЃарЃўрЃА TTL рЃњрЃљрЃЊрЃљрЃЏрЃгрЃДрЃЋрЃћрЃбрЃў

### рЃЏрЃЮрЃЎрЃџрЃћ TTL:
* РюЁ рЃЎрЃљрЃарЃњрЃўрЃљ рЃАрЃгрЃарЃљрЃцрЃў рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
* РЮї рЃфрЃБрЃЊрЃўрЃљ рЃЏрЃљрЃАрЃерЃбрЃљрЃЉрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА (рЃЏрЃћрЃбрЃў query)

### рЃњрЃарЃФрЃћрЃџрЃў TTL:
* РюЁ рЃЎрЃљрЃарЃњрЃўрЃљ рЃАрЃбрЃљрЃЉрЃўрЃџрЃБрЃарЃЮрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
* РЮї рЃфрЃБрЃЊрЃўрЃљ failover-рЃўрЃАрЃЌрЃЋрЃўрЃА

Рџа№ИЈ **рЃБрЃЏрЃћрЃбрЃћрЃАрЃў DNS outage-рЃћрЃЉрЃў = рЃфрЃБрЃЊрЃў TTL рЃљрЃарЃЕрЃћрЃЋрЃљрЃюрЃў**

## рЃюрЃљрЃгрЃўрЃџрЃў 6 Рђћ рЃарЃљрЃбрЃЮрЃЏ рЃўрЃгрЃЋрЃћрЃЋрЃА DNS рЃўрЃЏрЃЊрЃћрЃю outage-рЃА

DNS рЃљрЃарЃўрЃА:
* ­ЪїЇ рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў
* ­ЪњЙ Cache-рЃўрЃарЃћрЃЉрЃБрЃџрЃў
* ­Ъїљ рЃњрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃБрЃџрЃў
* ­ЪЈЌ№ИЈ рЃЏрЃарЃљрЃЋрЃљрЃџрЃцрЃћрЃюрЃЮрЃЋрЃљрЃюрЃў
* ­Ъљї рЃюрЃћрЃџрЃў рЃњрЃљрЃЋрЃарЃфрЃћрЃџрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
* ­ЪћЎ рЃарЃЌрЃБрЃџрЃў рЃЊрЃљрЃАрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃџрЃљрЃЊ

### рЃ«рЃерЃўрЃарЃў outage рЃЏрЃўрЃќрЃћрЃќрЃћрЃЉрЃў:

* РЮї **рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў DNS рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃў** - рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃљрЃЊ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў A рЃљрЃю CNAME
* РЮї **рЃ«рЃЏрЃћрЃџрЃў cache-рЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃў** - рЃФрЃЋрЃћрЃџрЃў IP рЃ»рЃћрЃа рЃЎрЃўрЃЊрЃћрЃЋ cache-рЃўрЃарЃћрЃЉрЃБрЃџрЃўрЃљ 24 рЃАрЃљрЃљрЃЌрЃўрЃА рЃњрЃљрЃюрЃЏрЃљрЃЋрЃџрЃЮрЃЉрЃљрЃерЃў
* РЮї **TTL рЃФрЃљрЃџрЃўрЃљрЃю рЃњрЃарЃФрЃћрЃџрЃў** - рЃЋрЃћрЃа рЃЏрЃЮрЃњрЃЋрЃљрЃарЃЊрЃћрЃЉрЃљ outage рЃАрЃгрЃарЃљрЃцрЃљрЃЊ
* РЮї **Cloudflare рЃљрЃю Route53 outage** - рЃњрЃљрЃЋрЃџрЃћрЃюрЃљрЃА рЃљрЃ«рЃЊрЃћрЃюрЃА рЃЏрЃўрЃџрЃўрЃЮрЃюрЃЮрЃЉрЃўрЃЌ
* РЮї **Authoritative рЃАрЃћрЃарЃЋрЃћрЃарЃў рЃњрЃљрЃЏрЃЮрЃарЃЌрЃБрЃџрЃўрЃљ** - рЃЊрЃЮрЃЏрЃћрЃюрЃў рЃЏрЃўрЃБрЃгрЃЋрЃЊрЃЮрЃЏрЃћрЃџрЃў рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃљрЃЊ
* РЮї **DNSSEC рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ** - рЃЏрЃДрЃўрЃАрЃўрЃћрЃарЃљрЃЊ рЃЎрЃџрЃљрЃЋрЃА рЃЊрЃЮрЃЏрЃћрЃюрЃА
* РЮї **рЃњрЃљрЃЏрЃЮрЃбрЃЮрЃЋрЃћрЃЉрЃБрЃџрЃў NS glue рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃў** - рЃЊрЃЮрЃЏрЃћрЃюрЃў рЃ«рЃЊрЃћрЃЉрЃљ рЃБрЃ«рЃўрЃџрЃљрЃЋрЃў

### DNS рЃБрЃљрЃарЃДрЃЮрЃцрЃћрЃЉрЃЏрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃгрЃЋрЃўрЃљ:

* GitHub рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
* WhatsApp рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
* Facebook outage
* Microsoft Azure outage
* DigitalOcean outage

**DNS рЃЏрЃДрЃўрЃцрЃћрЃљ.**

## рЃюрЃљрЃгрЃўрЃџрЃў 7 Рђћ рЃарЃЮрЃњрЃЮрЃа рЃ«рЃАрЃюрЃўрЃА Linux рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃА

### Linux рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ:

**/etc/nsswitch.conf**

рЃћрЃА рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃљрЃЋрЃА lookup рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљрЃА:
```
hosts: files dns
```

### рЃюрЃљрЃЉрЃўрЃ»рЃћрЃЉрЃўрЃА рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ:

1. /etc/hosts
2. DNS
3. mDNS (рЃЮрЃцрЃфрЃўрЃЮрЃюрЃљрЃџрЃБрЃарЃў)

рЃарЃћрЃљрЃџрЃБрЃарЃў DNS рЃАрЃћрЃарЃЋрЃћрЃарЃў рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃўрЃљ:
```
/etc/resolv.conf
```

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**
```
nameserver 8.8.8.8
nameserver 1.1.1.1
```

рЃЌрЃБ systemd-resolved рЃЕрЃљрЃарЃЌрЃБрЃџрЃўрЃљ:
```
nameserver 127.0.0.53
```

рЃЊрЃљ рЃарЃћрЃљрЃџрЃБрЃарЃў рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃў рЃерЃўрЃњрЃюрЃўрЃЌ:
```bash
systemd-resolve --status
```

## рЃ«рЃћрЃџрЃАрЃљрЃгрЃДрЃЮрЃћрЃЉрЃў: dig, nslookup, host

### dig Рђћ рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ DNS debugging-рЃўрЃАрЃЌрЃЋрЃўрЃА

```bash
dig google.com
```

![alt text](photo/image-48.png)

рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃўрЃЌ:
```bash
dig a google.com
```

рЃћрЃА рЃљрЃЕрЃЋрЃћрЃюрЃћрЃЉрЃА:
* root lookup
* TLD lookup
* NS lookup
* рЃАрЃљрЃЉрЃЮрЃџрЃЮрЃЮ A record

рЃБрЃљрЃдрЃарЃћрЃАрЃљрЃЊ рЃАрЃљрЃАрЃљрЃарЃњрЃћрЃЉрЃџрЃЮ.

### nslookup Рђћ рЃФрЃЋрЃћрЃџрЃў рЃ«рЃћрЃџрЃАрЃљрЃгрЃДрЃЮ

```bash
nslookup google.com
```

### host Рђћ рЃАрЃгрЃарЃљрЃцрЃў рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ

```bash
host google.com
```

## DNS Debugging DevOps/SRE-рЃўрЃАрЃЌрЃЋрЃўрЃА

### 1. рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ DNS рЃАрЃћрЃарЃЋрЃћрЃарЃўрЃА рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃў:

```bash
dig @8.8.8.8 google.com
```

![alt text](photo/image-49.png)

### 2. рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃАрЃарЃБрЃџрЃў resolution рЃњрЃќрЃљ:

```bash
dig google.com +trace
```

![alt text](photo/image-50.png)

### 3. рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ TTL:

```bash
dig +nocmd +noall +answer +ttlid a amazon.com
host -a -t a amazon.com
```

![alt text](photo/image-51.png)

![alt text](photo/image-52.png)

### 4. рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃарЃЮрЃЏрЃћрЃџ DNS рЃАрЃћрЃарЃЋрЃћрЃарЃА рЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ:

```bash
resolvectl status
```

### 5. рЃњрЃљрЃљрЃАрЃБрЃцрЃЌрЃљрЃЋрЃћрЃЌ DNS cache:

```bash
sudo systemd-resolve --flush-caches
sudo resolvectl flush-caches
```

## рЃарЃћрЃљрЃџрЃБрЃарЃў SRE Debug рЃАрЃфрЃћрЃюрЃљрЃарЃћрЃЉрЃў

### рЃАрЃфрЃћрЃюрЃљрЃарЃў 1 Рђћ рЃљрЃърЃў рЃ«рЃАрЃюрЃўрЃА рЃљрЃарЃљрЃАрЃгрЃЮрЃа IP-рЃА

DNS рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃў рЃњрЃљрЃюрЃљрЃ«рЃџрЃЊрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ TTL = 1 рЃЊрЃдрЃћ.
рЃФрЃЋрЃћрЃџрЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ cache-рЃўрЃарЃћрЃЉрЃБрЃџрЃў.

**рЃњрЃљрЃЏрЃЮрЃАрЃгрЃЮрЃарЃћрЃЉрЃљ:**
```bash
dig authoritative_nameserver
```
рЃюрЃљрЃ«рЃћрЃЌ рЃарЃћрЃљрЃџрЃБрЃарЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ.

### рЃАрЃфрЃћрЃюрЃљрЃарЃў 2 Рђћ Kubernetes CoreDNS рЃњрЃљрЃцрЃБрЃГрЃћрЃЉрЃБрЃџрЃў

Pod-рЃћрЃЉрЃА рЃљрЃа рЃерЃћрЃБрЃФрЃџрЃўрЃљрЃЌ cluster.local-рЃўрЃА resolution.

**рЃЊрЃћрЃЉрЃљрЃњрЃў:**
```bash
kubectl exec pod -- sh nslookup kubernetes.default
kubectl logs -n kube-system coredns-xyz
```

### рЃАрЃфрЃћрЃюрЃљрЃарЃў 3 Рђћ DNS VPN-рЃќрЃћ рЃБрЃљрЃарЃДрЃЮрЃцрЃА

Split tunnelling рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃљрЃЊ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў.

**рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ:**
```bash
ip route
resolvectl status
```

### рЃАрЃфрЃћрЃюрЃљрЃарЃў 4 Рђћ DNS рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЏрЃљрЃњрЃарЃљрЃЏ curl рЃБрЃљрЃарЃДрЃЮрЃцрЃА

рЃљрЃџрЃЉрЃљрЃЌ firewall / рЃърЃЮрЃарЃбрЃўрЃА рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ.
Ping + DNS РЅа рЃњрЃљрЃарЃљрЃюрЃбрЃўрЃљ рЃарЃЮрЃЏ TCP рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА.

## рЃАрЃгрЃарЃљрЃцрЃў рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ (рЃЊрЃдрЃћ 6)

DNS рЃљрЃарЃўрЃА:
* ­ЪЈЌ№ИЈ рЃўрЃћрЃарЃљрЃарЃЦрЃўрЃБрЃџрЃў
* ­ЪњЙ cache-рЃўрЃарЃћрЃЉрЃБрЃџрЃў
* ­Ъїљ рЃњрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃБрЃџрЃў
* Рџа№ИЈ рЃЏрЃДрЃўрЃцрЃћ
* ­Ъј» рЃБрЃљрЃдрЃарЃћрЃАрЃљрЃЊ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў

### рЃЌрЃЦрЃЋрЃћрЃю рЃўрЃАрЃгрЃљрЃЋрЃџрЃћрЃЌ:

* РюЁ рЃАрЃарЃБрЃџрЃў DNS lookup рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃљ
* РюЁ Recursive vs authoritative рЃАрЃћрЃарЃЋрЃћрЃарЃћрЃЉрЃў
* РюЁ A, CNAME, NS, SOA
* РюЁ TTL, caching, рЃњрЃљрЃЋрЃарЃфрЃћрЃџрЃћрЃЉрЃљ
* РюЁ рЃарЃљрЃбрЃЮрЃЏ рЃ«рЃЊрЃћрЃЉрЃљ DNS outage-рЃћрЃЉрЃў
* РюЁ рЃарЃЮрЃњрЃЮрЃа рЃ«рЃАрЃюрЃўрЃА Linux рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃА
* РюЁ рЃарЃЮрЃњрЃЮрЃа рЃЊрЃљрЃЋрЃљрЃЊрЃћрЃЉрЃљрЃњрЃЮрЃЌ dig/nslookup-рЃўрЃЌ

**рЃћрЃА рЃљрЃарЃўрЃА рЃћрЃарЃЌ-рЃћрЃарЃЌрЃў рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃдрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃБрЃюрЃљрЃарЃў DevOps/SRE-рЃерЃў.**

## рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў (рЃЊрЃдрЃћ 7)

**рЃЊрЃдрЃћ 7 Рђћ рЃЦрЃАрЃћрЃџрЃБрЃарЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃћрЃЉрЃў рЃЊрЃљ ip-link: рЃарЃЮрЃњрЃЮрЃа рЃ«рЃћрЃЊрЃљрЃЋрЃА Linux рЃЌрЃЦрЃЋрЃћрЃюрЃА NIC-рЃћрЃЉрЃА**

рЃЌрЃЦрЃЋрЃћрЃю рЃњрЃљрЃўрЃњрЃћрЃЉрЃЌ:

* рЃарЃљ рЃљрЃарЃўрЃА рЃЦрЃАрЃћрЃџрЃБрЃарЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў
* рЃцрЃўрЃќрЃўрЃЎрЃБрЃарЃў vs рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃарЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃћрЃЉрЃў
* рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА loopback
* veth рЃгрЃДрЃЋрЃўрЃџрЃћрЃЉрЃў рЃЊрЃљ bridges
* MTU рЃЊрЃљ рЃЏрЃўрЃАрЃў рЃњрЃљрЃЋрЃџрЃћрЃюрЃљ
* рЃарЃЮрЃњрЃЮрЃа рЃЊрЃљрЃЋрЃљрЃЊрЃћрЃЉрЃљрЃњрЃЮрЃЌ рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃА рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃћрЃЉрЃў